<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking - Minimal B&W</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
   <a href="index.html" class="back-link-float">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    <span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
</a>

<style>
.back-link-float {
    position: fixed; /* ‡πÉ‡∏ä‡πâ fixed ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏°‡πâ‡πÑ‡∏ñ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏°‡∏≤ */
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.8); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô */
    padding: 8px 12px;
    border-radius: 50px;
    display: flex;
    align-items: center;
    gap: 5px;
    text-decoration: none;
    color: #000;
    font-weight: 500;
    font-size: 14px;
    border: 1px solid #eee;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    z-index: 9999;
}
.back-link-float:hover {
    background: #000;
    color: #fff;
}
</style>

    <div class="container">
        <header>
            <img width="200" height="150" src="image/TR.png" alt="Shoe Service Logo" class="header-logo">
            <p style="color:#666; font-size:14px;">‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏ã‡∏±‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤</p>
        </header>

        <form id="bookingForm">
            <div class="row1">
                <!-- <div class="form-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠ (Name)</label>
                    <input type="text" name="name" required>
                </div> -->
                <div class="form-group">
                    <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ (Phone)</label>
                    <input type="tel" name="phone" required>
                </div>
            </div>

            <hr>

            <div class="form-group">
                <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤ (Shoe Type)</label>
                <select name="shoe_type" id="shoeType" required onchange="calculateTotal()">
                <!-- <select name="shoe_type" required> -->
                    <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
                    <option value="basketball">‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ö‡∏≤‡∏™ (basketball shoes)</option>
                    <option value="sneakers">‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ú‡πâ‡∏≤‡πÉ‡∏ö (Sneakers)</option>
                    <option value="Suede sneakers">‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ú‡πâ‡∏≤‡πÉ‡∏ö‡∏´‡∏ô‡∏±‡∏á‡∏Å‡∏•‡∏±‡∏ö (Suede sneakers)</option>
                    <option value="Nubuck">‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏´‡∏ô‡∏±‡∏á‡∏ô‡∏π‡∏ö‡∏±‡∏Ñ (Nubuck leather shoes)</option>
                    <option value="boots">‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏´‡∏ô‡∏±‡∏á (leather)</option>
                    <option value="sandals">‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡πÅ‡∏ï‡∏∞ (Sandals)</option>
                    <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)</option>
                    
                </select>
            </div>
            

            <div class="row">
                <div class="form-group">
                    <label>‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå (Brand)</label>
                    <input type="text" name="brand" placeholder="‡πÄ‡∏ä‡πà‡∏ô Nike, Adidas, Unbrand" required>
                </div>
                <div class="form-group">
                    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô (Model) <span style="font-weight:300; color:#999;">(‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</span></label>
                    <input type="text" name="model" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏∏‡πà‡∏ô (‡∏ñ‡πâ‡∏≤‡∏ó‡∏£‡∏≤‡∏ö)">
                </div>
            </div>

            <hr>

            <div class="row">
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤ </label>
                    <input type="date" name="pickup_date" required>
                </div>
                <div class="form-group">
                    <label>‡∏ß‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤ *‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 3 ‡∏ß‡∏±‡∏ô</label>
                    <input type="date" name="return_date" required>
                </div>
            </div>

            <div class="form-group">
                <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà / Google Maps (Address)</label>
                <textarea name="address" rows="3" placeholder="‡πÅ‡∏õ‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå Google Maps ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á..." required></textarea>
            </div>

           <!-- <div class="form-group">
                <label>Member ID</label>
                <input type="text" name="member_id" placeholder='‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÑ‡∏°‡πà‡∏°‡∏µ"'>
            </div> -->

            <div class="form-group">
                <label>Note / ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
                <textarea name="note" rows="2" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏≠‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÜ, ‡∏á‡∏≤‡∏ô‡∏î‡πà‡∏ß‡∏ô (Extra Charge)"></textarea>
            </div>
            
            <div class="form-group" style="text-align: left; margin-top: 20px;">
                <label>‡πÅ‡∏ô‡∏õ‡∏£‡∏π‡∏õ‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö/‡∏Ñ‡∏∞</label>
                <input type="file" id="Product pictures" accept="image/*" required>
                <p class="note-text">*‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Google Drive ‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</p>
            </div>

            
        <hr>
<div class="addon-section">
    <h3 style="font-size:16px; margin-bottom:15px;">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Add-on Services)</h3>
    
    <div class="form-group">
        <label>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πà‡∏ß‡∏ô (Service Speed)</label>
        <div class="radio-group">
            <label class="radio-item">
                <input type="radio" name="service_speed" value="0" checked onchange="calculateTotal()">
                ‡∏õ‡∏Å‡∏ï‡∏¥ (Standard) <span class="price">+0.-</span>
            </label>
            <label class="radio-item">
                <input type="radio" name="service_speed" value="89" onchange="calculateTotal()">
                ‡∏î‡πà‡∏ß‡∏ô 1-2 ‡∏ß‡∏±‡∏ô (Fast Track) <span class="price">+89.-</span>
            </label>
            <label class="radio-item">
                <input type="radio" name="service_speed" value="129" onchange="calculateTotal()">
                ‡∏î‡πà‡∏ß‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© 1 ‡∏ß‡∏±‡∏ô (Super Fast) <span class="price">+129.-</span>
            </label>
        </div>
    </div>

    <div class="form-group">
        <label>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏© (Extra Care)</label>
        <div class="checkbox-group">
            <label class="checkbox-item">
                <input type="checkbox" id="chk_yellow" value="299" onchange="calculateTotal()">
                ‡πÅ‡∏Å‡πâ‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (Un-Yellowing) <span class="price">+299.-</span>
            </label>
            <label class="checkbox-item">
                <input type="checkbox" id="chk_ozone" value="159" onchange="calculateTotal()">
                ‡∏≠‡∏ö‡πÇ‡∏≠‡πÇ‡∏ã‡∏ô‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (Ozone) <span class="price">+159.-</span>
            </label>
        </div>
    </div>

    <div class="total-price-box">
        <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô (Total)</span>
        <span class="price-text" id="displayTotal">189</span>
        <span style="font-size:18px;">‡∏ö‡∏≤‡∏ó</span>
    </div>
</div>
<div id="paymentModal" class="modal">
    <div class="modal-content">
        <h3>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (Payment)</h3>
        <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
        
        <img width="230" src="image/‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô.png" alt="PromptPay QR" class="qr-img">
        
        <div class="form-group" style="text-align: left; margin-top: 20px;">
            <label>‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (Upload Slip)</label>
            <input type="file" id="slipFile" accept="image/*" required>
            <p class="note-text">*‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Google Drive ‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</p>
        </div>
        <button type="submit" id="finalSubmit" class="btn-submit">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    </div>
</div>
        </form>
    </div>

 <script>
    // üî• 1. ‡πÄ‡∏≠‡∏≤ Web App URL ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyhb1tlT8VrOxUuMORY94383RedSsQ5SzcUkqUhYpl-PnFvl_13Op7J8SDWE5gSM8uE/exec';

    const form = document.getElementById('bookingForm');
    const btn = document.getElementById('finalSubmit');
    
    // (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤ calculateTotal ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏Å‡πá‡πÑ‡∏î‡πâ)
    function calculateTotal() {
        let total = 189; 
        const shoeType = document.getElementById('shoeType').value;
        
        if (shoeType === 'Suede sneakers') total += 100;
        if (shoeType === 'sandals') total -= 110;

        const speedRadios = document.getElementsByName('service_speed');
        for (const radio of speedRadios) {
            if (radio.checked) {
                total += parseInt(radio.value);
                break; 
            }
        }

        const chkYellow = document.getElementById('chk_yellow');
        const chkOzone = document.getElementById('chk_ozone');
        if (chkYellow && chkYellow.checked) total += 299;
        if (chkOzone && chkOzone.checked) total += 129;

        const displayTotal = document.getElementById('displayTotal');
        if(displayTotal) displayTotal.innerText = total.toLocaleString();
        
        return total;
    }

   form.addEventListener('submit', async (e) => { // ‡πÄ‡∏û‡∏¥‡πà‡∏° async ‡∏´‡∏ô‡πâ‡∏≤ (e)
    e.preventDefault();
    
    
    if (!form.checkValidity()) {
        form.reportValidity();
        return;
    }

    btn.innerHTML = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...";
    btn.disabled = true;

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô Base64 ‡πÅ‡∏ö‡∏ö Promise
    const toBase64 = file => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve({
            base64: reader.result.split(',')[1],
            name: file.name,
            type: file.type
        });
        reader.onerror = error => reject(error);
    });

   try {
        // ‡∏î‡∏∂‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å Input ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏à‡∏∏‡∏î
        const productInput = document.getElementById('Product pictures');
        const slipInput = document.querySelector('#paymentModal input[type="file"]');

        if (!productInput.files[0] || !slipInput.files[0]) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô");
            // (‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ btn ‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î)
            // btn.innerHTML = "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
            // btn.disabled = false;
            return;
        }

        // ‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
        const productFileData = await toBase64(productInput.files[0]);
        const slipFileData = await toBase64(slipInput.files[0]);

        // ==========================================
        // [‡πÉ‡∏´‡∏°‡πà] Step 1: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πà‡∏ß‡∏ô
        // ==========================================
        // ‡∏´‡∏≤ Radio ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å check ‡∏≠‡∏¢‡∏π‡πà
        const speedRadio = document.querySelector('input[name="service_speed"]:checked');
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å Label ‡∏Ç‡∏≠‡∏á Radio ‡∏ô‡∏±‡πâ‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "‡∏î‡πà‡∏ß‡∏ô 1-2 ‡∏ß‡∏±‡∏ô (Fast Track) +89.-")
        // .parentElement.innerText ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô label
        let serviceSpeedText = "‡∏õ‡∏Å‡∏ï‡∏¥ (Standard)"; // ‡∏Ñ‡πà‡∏≤ Default
        if (speedRadio) {
             // ‡πÉ‡∏ä‡πâ replace ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô
            serviceSpeedText = speedRadio.parentElement.innerText.replace(/\s+/g, ' ').trim();
        }

        // ==========================================
        // [‡πÉ‡∏´‡∏°‡πà] Step 2: ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏© (Add-ons)
        // ==========================================
        let addons = [];
        const chkYellow = document.getElementById('chk_yellow');
        const chkOzone = document.getElementById('chk_ozone');

        if (chkYellow && chkYellow.checked) {
            addons.push("‡πÅ‡∏Å‡πâ‡∏û‡∏∑‡πâ‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (Un-Yellowing)");
        }
        if (chkOzone && chkOzone.checked) {
            addons.push("‡∏≠‡∏ö‡πÇ‡∏≠‡πÇ‡∏ã‡∏ô‡∏Ü‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πâ‡∏≠ (Ozone)");
        }
        
        // ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ comma (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏µ‡∏î -)
        const addonsText = addons.length > 0 ? addons.join(", ") : "-";

        const payload = {
            phone: form.phone.value,
            shoe_type: form.shoe_type.value,
            brand: form.brand.value,
            model: form.model.value,
            pickup_date: form.pickup_date.value,
            return_date: form.return_date.value,
            address: form.address.value,
            note: form.note.value,
            service_speed: serviceSpeedText, // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πà‡∏ß‡∏ô
            addon_services: addonsText,      // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏°
            total_price: calculateTotal(),
            // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            productFile: productFileData.base64,
            productFileName: productFileData.name,
            productMimeType: productFileData.type,
            // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ
            slipFile: slipFileData.base64,
            slipFileName: slipFileData.name,
            slipMimeType: slipFileData.type
        };

 // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô fetch(...).then(...)
        const response = await fetch(scriptURL, { 
            method: 'POST', 
            body: JSON.stringify(payload) 
        });

        const result = await response.json();

        if (result.result === 'success') {
            Swal.fire({
        title: '‡∏à‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!',
        text: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',
        icon: 'success',
        confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
        confirmButtonColor: '#000'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = "index.html";
        }
    });
            // window.location.href = "index.html"; // ‡∏¢‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡πÑ‡∏ß‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ
        } else {
            throw new Error(result.error);
        }

    } catch (error) {
        console.error(error);
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
    } finally {
        btn.innerHTML = "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
        btn.disabled = false;
    }
});

    
</script>












